{% style %}
  .gift-steps {
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
  }

  .gift-steps__container {
    max-width: {{ section.settings.max_width }}px;
    margin: 0 auto;
    background: {{ section.settings.background }};
    border-radius: 24px;
    padding: 48px 32px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.08);
  }

  .gift-steps__heading {
    text-align: center;
    margin-bottom: 48px;
   
  }

  .gift-steps__heading h2 {
    font-size: 24px;
  }

  .gift-steps__grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 32px;
    text-align: center;
  }

  .gift-step__image {
    margin-bottom: 24px;
  }

  .gift-step__image img {
    height: var(--image-height);
    width: auto;
    max-width: 100%;
    display: block;
    margin: 0 auto;
  }

  .gift-step h3 {
    margin-bottom: 8px;
  }

  /* Mobile optimizations */
  @media (max-width: 768px) {
    .gift-steps__container {
      padding: 32px 20px;
      border-radius: 20px;
    }

    .gift-steps__heading {
      margin-bottom: 32px;
    }

    .gift-steps__grid {
      grid-template-columns: 1fr;
      gap: 40px;
    }

    .gift-step__image img {
      height: var(--image-height-mobile);
    }
  }
{% endstyle %}

<section class="gift-steps">
  <div class="gift-steps__container">
    {% if section.settings.heading != blank %}
      <div class="gift-steps__heading">
        <h2>{{ section.settings.heading }}</h2>
      </div>
    {% endif %}

    <div class="gift-steps__grid">
      {% for block in section.blocks %}
        <div class="gift-step" {{ block.shopify_attributes }}>
          {% if block.settings.image %}
            <div
              class="gift-step__image"
              style="
                --image-height: {{ block.settings.image_height }}px;
                --image-height-mobile: {{ block.settings.image_height_mobile }}px;
              "
            >
              <img
                src="{{ block.settings.image | image_url: width: 600 }}"
                alt="{{ block.settings.title | escape }}"
                loading="lazy"
              >
            </div>
          {% endif %}

          {% if block.settings.title != blank %}
            <h3>{{ block.settings.title }}</h3>
          {% endif %}

          {% if block.settings.text != blank %}
            <p>{{ block.settings.text }}</p>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Gift Steps",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Gift Giving, Elevated."
    },
    {
      "type": "range",
      "id": "max_width",
      "label": "Section width (px)",
      "min": 800,
      "max": 1600,
      "step": 50,
      "default": 1200
    },
    {
  "type": "color_background",
  "id": "background",
  "label": "Background",
  "default": "linear-gradient(0deg, rgba(255,255,255,0.3), rgba(255,255,255,0.3)), linear-gradient(135deg, #F1DFFE, #F9E4E3)"
},

    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "min": 0,
      "max": 200,
      "step": 8,
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 200,
      "step": 8,
      "default": 80
    }
  ],
  "blocks": [
    {
      "type": "step",
      "name": "Step",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "range",
          "id": "image_height",
          "label": "Image height (desktop px)",
          "min": 60,
          "max": 300,
          "step": 10,
          "default": 140
        },
        {
          "type": "range",
          "id": "image_height_mobile",
          "label": "Image height (mobile px)",
          "min": 40,
          "max": 220,
          "step": 10,
          "default": 110
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Step 1"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "Step description"
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Gift Steps",
      "blocks": [
        { "type": "step" },
        { "type": "step" },
        { "type": "step" }
      ]
    }
  ]
}
{% endschema %}
